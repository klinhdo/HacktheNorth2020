<!doctype html>

<!--
    WebSocket chat client

    WebSocket and WebRTC based multi-user chat sample with two-way video
    calling, including use of TURN if applicable or necessary.

    This file provides the structure of the chat client's web page, including
    logging in, text chatting, and making private video calls to other users.

    To read about how this sample works:  http://bit.ly/webrtc-from-chat

    Any copyright is dedicated to the Public Domain.
    http:   creativecommons.org/publicdomain/zero/1.0/
-->

<html>

<head>
  <title>WebSocket Chat Demo with WebRTC Calling</title>
  <meta charset="utf-8">
  <link href="chat.css" rel="stylesheet">
  <link href="../shared.css" rel="stylesheet">
  <script type="text/javascript" src="chatclient.js"></script>
  <script src="adapter.js"></script>

</head>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyC0UY_D8L27PoXbCNGbMhHFDPeyFTnK3Xc",
    authDomain: "fir-rtc-d62fd.firebaseapp.com",
    projectId: "fir-rtc-d62fd",
    storageBucket: "fir-rtc-d62fd.appspot.com",
    messagingSenderId: "971433442353",
    appId: "1:971433442353:web:1954283a797b2486c8e910",
    measurementId: "G-LVDDMKT9PZ"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>

<body>
  <script>
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        document.body.innerHTML = '<h1> Congrats ' + user.displayName + ', you are done!';
      } else {
        console.log("no user signed in");
      }
    })
  </script>
  <div class="container">
    <div class="infobox">
      <p>Click a username in the user list to ask them to enter a one-on-one video chat with you.</p>
      <p>Enter a username: <input id="name" type="text" maxlength="12" required autocomplete="username"
          inputmode="verbatim" placeholder="Username">
        <input type="button" name="login" value="Log in" onclick="connect()">
      </p>
    </div>
    <div class="camerabox">
      <video id="received_video" autoplay></video>
      <video id="local_video" autoplay muted></video>
      <button id="hangup-button" onclick="hangUpCall();" role="button" disabled>
        Hang Up
      </button>
    </div>
    <ul class="userlistbox">No users...</ul>
    <div class="chatbox"></div>

    <div class="empty-container"></div>
    <div class="chat-controls">
      Chat:<br />
      <input id="text" type="text" name="text" size="100" maxlength="100" placeholder="Say something meaningful..."
        autocomplete="off" onkeyup="handleKey(event)" disabled>
      <input type="button" id="send" name="send" value="Send" onclick="handleSendButton()" disabled>
    </div>
  </div>
</body>

</html>